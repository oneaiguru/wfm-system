(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5d8d398"],{"362a":function(t,s,i){"use strict";i("bc67")},6044:function(t,s,i){"use strict";i.r(s);var e=i("8336"),a=i("99d9"),n=i("adda"),o=i("da13"),l=i("5d23"),r=i("2fa4"),c=function(){var t=this,s=t._self._c;return s("base-container",{attrs:{title:t.$t("user.pageTitle")}},[s("div",{staticClass:"d-flex pa-2"},[s("div",{staticClass:"font-weight-bold my-1"},[t._v(" "+t._s(t.$t("notification.turnOnLabel"))+" ")]),s(r["a"]),s("div",[s(e["a"],{attrs:{color:"primary"},on:{click:t.notificationRequest},model:{value:t.notificationsAllowed,callback:function(s){t.notificationsAllowed=s},expression:"notificationsAllowed"}},[t._v(" "+t._s(t.$t("notification.subscribeBtnLabel"))+" ")])],1)],1),s(a["c"],[s("div",{staticClass:"flex-grow-1 pt-2 pa-sm-2"},[s(n["a"],{staticClass:"blue-grey lighten-4 rounded elevation-3",attrs:{src:t.getImage(),"aspect-ratio":"1",width:"100",height:"100"}})],1)]),s(a["c"],[s("div",{staticClass:"d-flex flex-column flex-sm-row"},[s(o["a"],{staticClass:"flex-column"},[s(l["b"],{staticClass:"align-self-start"},[s(l["c"],[t._v(t._s(t.$t("user.userFullName")))]),s(l["d"],{staticClass:"h3"},[t._v(t._s(t.profile.fio))])],1),t._l(t.infoItems,(function(i){return"Подразделение"===i.name?s(l["b"],{key:i.name,staticClass:"align-self-start"},[s(l["c"],[t._v(t._s(t.$t("user.department")))]),s(l["d"],{staticClass:"h3"},[t._v(t._s(i.value))])],1):t._e()})),t._l(t.infoItems,(function(i){return"Должность"===i.name?s(l["b"],{key:i.name,staticClass:"align-self-start"},[s(l["c"],[t._v(t._s(t.$t("user.position")))]),s(l["d"],{staticClass:"h3"},[t._v(t._s(i.value))])],1):t._e()})),t._l(t.infoItems,(function(i){return"Табельный номер"===i.name?s(l["b"],{key:i.name,staticClass:"align-self-start"},[s(l["c"],[t._v(t._s(t.$t("user.tabNum")))]),s(l["d"],{staticClass:"h3"},[t._v(t._s(i.value))])],1):t._e()})),t._l(t.infoItems,(function(i){return"Контактный телефон руководителя"===i.name?s(l["b"],{key:i.name,staticClass:"align-self-start"},[s(l["c"],[t._v(t._s(t.$t("user.chiefPhone")))]),s(l["d"],{staticClass:"h3"},[t._v(t._s(i.value))])],1):t._e()})),t._l(t.infoItems,(function(i){return"Часовой пояс"===i.name?s(l["b"],{key:i.name,staticClass:"align-self-start"},[s(l["c"],[t._v(t._s(t.$t("user.zoneId")))]),s(l["d"],{staticClass:"h3"},[t._v(t._s(i.value))])],1):t._e()}))],2)],1)])],1)},f=[],u=i("56e2"),d=i("6f91"),h=i("2f62"),m={name:"Profile",props:{worker:null},components:{BaseContainer:d["a"]},data(){return{notificationsAllowed:!1,profile:"",infoItems:"",profileImage:""}},mounted(){u["a"].request().then(t=>{this.profile=t.data,this.infoItems=t.data.infoItems,u["a"].request().then(({data:t})=>{const{infoItems:s,id:i}=t;this.profile=t,this.infoItems=s,u["a"].getCachedPic(i).then(t=>{this.profileImage=t})})})},methods:{...Object(h["b"])("app",["showToast","showError","showSuccess"]),splitUri(t){const s=t.split(":");return s.length>1?s[1]:t},getImage(){return this.profileImage},notificationRequest(){Notification.requestPermission().then(()=>{if(!this.$messaging)return this.showError({description:this.$t("notification.firebaseMessagingNotInitialized")}),void(this.notificationsAllowed=!1);this.$messaging.getToken().then(t=>t?(u["a"].pushNotificationToken(t),this.showSuccess({description:this.$t("notification.subscribeSuccess")}),!0):(this.showError({description:this.$t("notification.firebaseInvalidToken")}),void(this.notificationsAllowed=!1))).catch(t=>{this.showError({description:`${this.$t("notification.subscribeError")}: ${t.message}`}),this.notificationsAllowed=!1})}).catch(t=>{this.showError({description:`${this.$t("notification.permissionError")}: ${t.message}`}),this.notificationsAllowed=!1})}}},_=m,p=(i("362a"),i("2877")),v=Object(p["a"])(_,c,f,!1,null,"60d31260",null);s["default"]=v.exports},"6f91":function(t,s,i){"use strict";var e=i("b0af"),a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"d-flex flex-column flex-grow-1",staticStyle:{height:"fit-content"}},[s("div",{staticClass:"d-flex align-center py-3"},[s("div",[s("div",{staticClass:"display-1"},[t._v(t._s(t.title))])])]),s(e["a"],{staticClass:"d-flex flex-column flex-grow-1",attrs:{elevation:"2",outlined:""}},[t._t("default")],2)],1)},n=[],o={name:"BaseContainer",props:{title:String}},l=o,r=i("2877"),c=Object(r["a"])(l,a,n,!1,null,"faa08ae4",null);s["a"]=c.exports},bc67:function(t,s,i){}}]);